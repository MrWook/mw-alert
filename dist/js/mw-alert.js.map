{"version":3,"sources":["../../src/extra/.prefix","../../src/mw-alert.js","../../src/modules/mw-alert-config.js","../../src/modules/mw-alert-directive.js","../../src/modules/mw-alert-service.js","../../tmp/templates.js","../../src/extra/.suffix"],"names":["angular","module","constant","parent_selector","timeout","close_auto","templateUrl","directive","$timeout","mwAlertService","mwAlertConfig","controller","AlertCtrl","$scope","close","$on","event","message","restrict","params","attr","mwAlertTemplateUrl","undefined","replace","service","$rootScope","$document","$compile","parent","element","querySelector","injector","invoke","scope","prepend","$apply","debounce","open","msg","Array","isArray","text","type","copy","$broadcast","data","cancel","catch","Error"],"mappings":"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","file":"mw-alert.js","sourcesContent":["(function(ng, undefined){","angular.module('mw-alert', ['mw-alert-template']);","angular.module('mw-alert').constant('mwAlertConfig', {\r\n\tparent_selector: 'body',\r\n\ttimeout:         3000,\r\n\tclose_auto:      true,\r\n\ttemplateUrl:     'mw-alert.html'\r\n});","angular.module('mw-alert').directive('mwAlert', ['$timeout', 'mwAlertService', 'mwAlertConfig', function($timeout, mwAlertService, mwAlertConfig){\r\n\treturn {\r\n\t\tcontroller:  ['$scope', function AlertCtrl($scope){\r\n\t\t\t//bind close function\r\n\t\t\t$scope.close = mwAlertService.close;\r\n\r\n\t\t\t//listen for deleted event and set message\r\n\t\t\t$scope.$on('mw-alert-closed', function(event, message){\r\n\t\t\t\t$scope.message = message;\r\n\t\t\t});\r\n\r\n\t\t\t//listen for open event and set message\r\n\t\t\t$scope.$on('mw-alert-opened', function(event, message){\r\n\t\t\t\t$scope.message = message;\r\n\t\t\t});\r\n\t\t}],\r\n\t\trestrict:    'E',\r\n\t\t$scope:      true,\r\n\t\ttemplateUrl: function(params, attr){\r\n\t\t\tif(attr.mwAlertTemplateUrl !== undefined){\r\n\t\t\t\treturn attr.mwAlertTemplateUrl;\r\n\t\t\t}else{\r\n\t\t\t\treturn mwAlertConfig.templateUrl;\r\n\t\t\t}\r\n\t\t},\r\n\t\treplace:     true\r\n\t};\r\n}]);","angular.module('mw-alert').service('mwAlertService', ['$rootScope', '$document', '$compile', '$timeout', 'mwAlertConfig', function($rootScope, $document, $compile, $timeout, mwAlertConfig){\r\n\tlet parent_selector = mwAlertConfig.parent_selector;\r\n\t//set the directive inside the parent selector, default is body\r\n\t//I'm totally aware of the fact that you shouldn't use DOM manipulation outside of a directive but this is for a greater GOOD!\r\n\tlet parent = angular.element($document[0].querySelector(parent_selector));\r\n\t$timeout(function(){\r\n\t\tangular.element(parent).injector().invoke(function($compile){\r\n\t\t\tlet $scope = angular.element(parent).scope();\r\n\t\t\tparent.prepend($compile('<mw-alert></mw-alert>')($scope));\r\n\t\t\t// Finally, refresh the watch expressions in the new element\r\n\t\t\t$scope.$apply();\r\n\t\t});\r\n\t}, 0);\r\n\r\n\tlet message;\r\n\tlet debounce = null;\r\n\t//set new alert\r\n\tlet open     = function(msg){\r\n\t\t//message need to be an object and has the properties text and type\r\n\t\tif(msg !== null && Array.isArray(msg) === false && typeof msg === 'object'){\r\n\t\t\tif(msg.text !== undefined && msg.type !== undefined){\r\n\t\t\t\t//destroy reference with angular.copy\r\n\t\t\t\tmessage = angular.copy(msg);\r\n\t\t\t\t$rootScope.$broadcast('mw-alert-opened', message);\r\n\t\t\t\t//check if auto close is active\r\n\t\t\t\tif((message.close_auto !== undefined && message.close_auto == true) || (message.close_auto === undefined && mwAlertConfig.close_auto)){\r\n\t\t\t\t\tlet timeout = mwAlertConfig.timeout;\r\n\t\t\t\t\t//check if timeout is set and is a number\r\n\t\t\t\t\tif(message.timeout !== undefined && typeof data === 'number' && (data%1) === 0){\r\n\t\t\t\t\t\ttimeout = message.timeout;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(debounce !== null){\r\n\t\t\t\t\t\t$timeout.cancel(debounce);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdebounce = $timeout(function(){\r\n\t\t\t\t\t\tclose();\r\n\t\t\t\t\t\tdebounce = null;\r\n\t\t\t\t\t}, timeout).catch(function(){\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthrow new Error(\"The message for mw-alert need to have the properties 'type' and 'text'\");\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthrow new Error(\"The message for mw-alert need to be an object.\");\r\n\t\t}\r\n\t};\r\n\r\n\t//close the alert box\r\n\tlet close = function(){\r\n\t\tmessage = undefined;\r\n\t\t$rootScope.$broadcast('mw-alert-closed', message);\r\n\t};\r\n\r\n\treturn {\r\n\t\topen:  open,\r\n\t\tclose: close\r\n\t};\r\n}]);","angular.module(\"mw-alert-template\", []).run([\"$templateCache\", function($templateCache) {\r\n\t$templateCache.put(\"mw-alert.html\",\r\n\t\t\"<div class=\\\"mw-alert\\\" ng-class=\\\"'alert-' + (message.type || 'warning')\\\" ng-if=\\\"message != undefined\\\"><div class=\\\"mw-alert-text\\\">{{message.text}}</div><button type=\\\"button\\\" class=\\\"mw-alert-close\\\" ng-click=\\\"close()\\\" aria-hidden=\\\"false\\\"><span aria-hidden=\\\"true\\\">Ã—</span></button></div>\");\r\n}]);\r\n","})();"]}